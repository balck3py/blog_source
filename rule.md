---
title: 技术文档编写规范
date: 2025-12-17
author: Eugen
tags:
  - 文档规范
  - 编写指南
  - 风格约定
---

# 📋 技术文档编写规范

本文档定义了本知识库中所有技术文档的编写规范和风格约定，确保文档风格统一、结构清晰、易于阅读和维护。

---

## 1. Frontmatter 规范

所有 Markdown 文档必须在文件开头包含 YAML Frontmatter，格式如下：

```yaml
---
title: [文档标题，使用文档的主标题]
date: YYYY-MM-DD
author: Eugen
tags:
  - [关键词1]
  - [关键词2]
  - [关键词3]
  - ...
---
```

### 1.1 Frontmatter 字段说明

- **title**: 
  - 使用文档的主标题（第一个一级标题）
  - 应与文档内容主题一致
  - 示例：`title: .NET Core C# 垃圾回收（GC）完全指南`

- **date**: 
  - 格式：`YYYY-MM-DD`
  - 使用文档的创建日期
  - 示例：`date: 2025-12-15`

- **author**: 
  - 固定为 `Eugen`
  - 示例：`author: Eugen`

- **tags**: 
  - 根据文档内容总结 5-10 个核心关键词
  - 使用中文或英文，保持一致性
  - 关键词应准确反映文档主题和技术栈
  - 按重要性排序，最重要的放在前面
  - 示例：
    ```yaml
    tags:
      - .NET Core
      - GC
      - 垃圾回收
      - 内存管理
      - C#
      - 性能优化
      - LOH
    ```

---

## 2. 文档结构规范

### 2.1 标题层级

- **一级标题（#）**: 文档主标题，带 emoji 图标
  ```markdown
  # 🧹 .NET Core C# 垃圾回收（GC）完全指南
  ```

- **二级标题（##）**: 主要章节
  ```markdown
  ## 1. 什么是垃圾回收
  ```

- **三级标题（###）**: 子章节
  ```markdown
  ### 🤔 为什么需要 GC？
  ```

- **四级标题（####）**: 细分内容（谨慎使用）

### 2.2 文档开头结构

文档开头应包含以下内容（按顺序）：

1. **Frontmatter**（已包含）
2. **主标题**（带 emoji）
3. **简介/引言**（使用引用格式）
4. **分隔线**（`---`）
5. **目录**（可选，长文档建议包含）

示例：
```markdown
---
title: .NET Core C# 垃圾回收（GC）完全指南
date: 2025-12-15
author: Eugen
tags:
  - .NET Core
  - GC
---
# 🧹 .NET Core C# 垃圾回收（GC）完全指南

> 本文面向初学者，从基础概念到高级实践，全面介绍 .NET Core 中的垃圾回收机制。

---

## 📚 目录

1. [什么是垃圾回收](#1-什么是垃圾回收)
2. [内存布局：堆与栈](#2-内存布局堆与栈)
...
```

### 2.3 章节结构

每个主要章节应包含：

1. **章节标题**（二级或三级）
2. **内容说明**（概念、原理、示例）
3. **代码示例**（如适用）
4. **小结**（使用引用格式）

示例：
```markdown
## 1. 什么是垃圾回收

### 🤔 为什么需要 GC？

[内容说明...]

### ✨ GC 来拯救你

[内容说明...]

### 📝 小结

> GC 让你专注于业务逻辑，而不用操心内存管理。它是 .NET 的核心特性之一，让 C# 开发更安全、更高效。

---
```

---

## 3. 内容风格规范

### 3.1 语言规范

- **语言**: 使用中文简体
- **术语**: 技术术语首次出现时使用中英文对照，后续可只用中文
  - 示例：`垃圾回收（Garbage Collection，简称 GC）`
- **语气**: 友好、专业、面向初学者
- **人称**: 使用"你"而非"您"，保持亲切

### 3.2 Emoji 使用规范

在标题和关键段落中使用 emoji 增强可读性：

| Emoji | 用途 | 示例 |
|-------|------|------|
| 🧹 🧵 🔐 | 文档主题图标 | `# 🧹 .NET Core GC 指南` |
| 🤔 | 提出问题 | `### 🤔 为什么需要 GC？` |
| ✨ | 解决方案/特性 | `### ✨ GC 来拯救你` |
| 📚 | 目录/索引 | `## 📚 目录` |
| 📊 | 图表/数据 | `### 📊 两种内存区域` |
| 💡 | 提示/建议 | `> 💡 小结：...` |
| ⚠️ | 警告/注意 | `⚠️ 警告：不要频繁调用 GC.Collect()` |
| ✅ | 正确做法 | `✅ 正确做法：...` |
| ❌ | 错误做法 | `❌ 错误做法：...` |
| 🔄 | 流程/循环 | `### 🔄 代的晋升流程` |
| 📝 | 小结/总结 | `### 📝 小结` |

**注意**: Emoji 应适度使用，不要过度装饰。

### 3.3 强调和格式

- **加粗（**）**: 用于强调关键概念、术语、重要提示
- **代码（`）**: 用于代码片段、命令、文件名、配置项
- **引用（>）**: 用于小结、重要提示、引用内容
- **列表**: 使用有序列表（1. 2. 3.）或无序列表（- *）

---

## 4. 代码示例规范

### 4.1 代码块格式

- 使用三个反引号（```）包裹代码
- 必须指定语言类型（如 `csharp`、`bash`、`yaml`、`json`）
- 代码前添加简要说明

示例：
```markdown
在 C# 中你只需要这样：

```csharp
// C# 中你只需要这样
public void Example()
{
    var person = new Person { Name = "张三" };  // 创建对象
    // 使用对象...
}
// 方法结束后，GC 会自动回收不再使用的 person 对象
// 无需手动调用 delete 或 free！
```
```

### 4.2 代码注释

- 关键代码行应添加中文注释
- 注释应解释"为什么"而不仅仅是"是什么"
- 使用 `//` 进行行内注释

### 4.3 正确 vs 错误对比

使用对比方式展示最佳实践：

```markdown
// ❌ 不好：大量临时字符串
public string BadStringConcat(string[] items)
{
    string result = "";
    foreach (var item in items)
    {
        result += item;  // 每次都创建新字符串
    }
    return result;
}

// ✅ 好：使用 StringBuilder
public string GoodStringConcat(string[] items)
{
    var sb = new StringBuilder();
    foreach (var item in items)
    {
        sb.Append(item);
    }
    return sb.ToString();
}
```

---

## 5. 表格和图示规范

### 5.1 表格格式

使用 Markdown 表格展示对比、特性说明等：

```markdown
| 特性 | Thread | ThreadPool | Task |
|------|--------|------------|------|
| 创建开销 | 高 | 低 | 低 |
| 内存占用 | ~1MB | 复用 | 复用 |
| 适合场景 | 长时间运行 | 短小频繁 | 现代异步 |
```

### 5.2 ASCII 图示

使用 ASCII 艺术展示架构、流程、内存布局等：

```markdown
```
┌─────────────────────────────────────────────────────────────┐
│                           栈 (Stack)                         │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────┐                                    │
│  │ int x = 10          │  ← 值直接存储                       │
│  └─────────────────────┘                                    │
└─────────────────────────────────────────────────────────────┘
```
```

### 5.3 流程图

使用文本描述或 ASCII 图示展示流程：

```markdown
```
    ┌─────────┐
    │ Unstarted │  ← 创建后的初始状态
    └────┬────┘
         │ Start()
         ▼
    ┌─────────┐
    │ Running  │  ← 正在执行
    └─────────┘
```
```

---

## 6. 文件命名规范

### 6.1 命名格式

- **格式**: `[序号]. [文档标题].md`
- **序号**: 使用两位数字（01, 02, 03...）进行排序
- **标题**: 使用描述性标题，清晰表达文档主题
- **扩展名**: 统一使用 `.md`

示例：
- `01. Dot Net Core 中的 GC.md`
- `02. 多线程那些事：Thread、ThreadPool、Task、Async Await等.md`
- `03. 记一次内存泄漏排查经历.md`

### 6.2 目录结构

文档按主题分类存放在不同目录：

```
00.技术积累/
├── 01.后端/          # 后端技术文档
├── 02.前端/          # 前端技术文档
├── 03.DevOps/        # DevOps 相关文档
├── 04.通用/          # 通用技术文档
└── 00.assets/        # 图片资源目录
```

---

## 7. 图片引用规范

### 7.1 图片存储

- 所有图片统一存放在 `00.assets/` 目录
- 图片命名格式：`Pasted image YYYYMMDDHHMMSS.png`

### 7.2 图片引用

使用 Obsidian 风格的图片引用格式：

```markdown
![[../00.assets/Pasted image 20251212164204.png]]
```

**注意**: 
- 使用相对路径 `../00.assets/`
- 图片文件名需与实际文件名完全一致
- 图片应放在相关文字说明之后

---

## 8. 章节小结规范

每个主要章节结束时应有小结，使用引用格式：

```markdown
### 📝 小结

> GC 让你专注于业务逻辑，而不用操心内存管理。它是 .NET 的核心特性之一，让 C# 开发更安全、更高效。
```

小结应：
- 简洁总结章节核心要点
- 使用引用格式（`>`）
- 可包含 emoji（💡、📝等）

---

## 9. 文档结尾规范

长文档应在结尾包含总结部分：

```markdown
## 📚 总结

### 🎯 关键概念速查表

| 概念 | 说明 |
|------|------|
| **栈** | 值类型、方法调用信息，自动管理 |
| **堆** | 引用类型对象，GC 管理 |
...

### ✨ 黄金法则

1. ✅ **优先使用 `IDisposable` 和 `using`**，而非终结器
2. ✅ **减少不必要的内存分配**，使用对象池和 `Span<T>`
...

### 🎓 学习路径建议

1. **初学者**：理解堆/栈、托管/非托管、分代回收基本概念
2. **进阶**：掌握 IDisposable 模式、理解 LOH 和 Finalizer
3. **高级**：GC 调优、诊断工具使用、性能分析

---

> 📖 本文档持续更新，如有问题欢迎讨论！
```

---

## 10. 特殊内容规范

### 10.1 命令行示例

命令行示例应：
- 使用 `bash` 语言标识
- 包含完整命令和参数说明
- 使用注释说明参数含义

示例：
```markdown
```bash
# 进入 Pod 内部
kubectl exec -it <pod-name> -- bash

# 安装 dotnet-counters 工具
./dotnet tool install --global dotnet-counters --version 7.*
```
```

### 10.2 配置文件示例

配置文件示例应：
- 使用对应的语言标识（`yaml`、`json`、`xml` 等）
- 包含注释说明关键配置项
- 提供实际可用的配置

示例：
```markdown
```yaml
env:
  - name: MALLOC_ARENA_MAX
    value: "2"
```
```

### 10.3 警告和注意事项

重要警告使用以下格式：

```markdown
> ⚠️ **警告**：频繁创建/销毁线程会导致严重的性能问题！

> 💡 **提示**：理解这个机制有助于编写 GC 友好的代码。
```

---

## 11. 文档质量检查清单

在完成文档后，请检查以下事项：

- [ ] Frontmatter 格式正确，包含所有必需字段
- [ ] 标题层级清晰，使用 emoji 增强可读性
- [ ] 代码示例完整且可运行
- [ ] 所有代码示例都有中文注释
- [ ] 表格格式正确，内容对齐
- [ ] ASCII 图示清晰易读
- [ ] 图片引用路径正确
- [ ] 每个主要章节都有小结
- [ ] 文档结尾有总结（长文档）
- [ ] 术语使用一致，首次出现有中英文对照
- [ ] 无拼写错误和语法错误
- [ ] 文件命名符合规范

---

## 12. 示例文档结构

完整的文档结构示例：

```markdown
---
title: [文档标题]
date: YYYY-MM-DD
author: Eugen
tags:
  - [关键词1]
  - [关键词2]
---
# 🎯 [文档主标题]

> [文档简介，说明文档面向的读者和主要内容]

---

## 📚 目录

1. [章节1](#1-章节1)
2. [章节2](#2-章节2)
...

---

## 1. 章节1

### 1.1 子章节

[内容说明...]

```csharp
// 代码示例
```

### 📝 小结

> [章节小结]

---

## 2. 章节2

...

---

## 📚 总结

[文档总结]

---

> 📖 本文档持续更新，如有问题欢迎讨论！
```

---

## 附录：常用 Emoji 参考

| Emoji | 含义 | 使用场景 |
|-------|------|----------|
| 🧹 | 清理/GC | 垃圾回收相关 |
| 🧵 | 线程 | 多线程相关 |
| 🔐 | 安全/锁 | 并发控制相关 |
| 📚 | 目录/文档 | 目录、索引 |
| 🤔 | 疑问 | 提出问题 |
| ✨ | 特性/亮点 | 解决方案 |
| 📊 | 图表 | 数据展示 |
| 💡 | 提示 | 重要提示 |
| ⚠️ | 警告 | 注意事项 |
| ✅ | 正确 | 推荐做法 |
| ❌ | 错误 | 不推荐做法 |
| 🔄 | 循环/流程 | 流程说明 |
| 📝 | 小结 | 章节总结 |
| 🎯 | 目标 | 核心要点 |
| 🚀 | 性能 | 性能相关 |
| 🐢 | 慢 | 性能问题 |
| ⚡ | 快 | 性能优势 |

---

**最后更新**: 2025-12-17  
**维护者**: Eugen

> 📖 本文档应与知识库同步更新，确保规范始终反映最新的文档风格和约定。
